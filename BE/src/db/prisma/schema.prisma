generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Company {
  id               String   @id @default(uuid())
  name             String   @db.VarChar
  description      String   @db.VarChar
  category         Category
  totalInvestment  Int
  totalProfit      Int
  employeeCount    Int
  viewInvestAmount Int      @default(0)
  countMyPicked    Int      @default(0)
  countYourPicked  Int      @default(0)
  changedAt        DateTime @default(now())
  invests          Invest[]
}

model Invest {
  id            String         @id @default(uuid())
  username      String         @db.VarChar
  password      String         @db.VarChar
  companyId     String
  investAmount  Int
  state         String         @db.VarChar
  company       Company        @relation(fields: [companyId], references: [id], onDelete: Cascade)
  investDetails InvestDetail[]
}

model InvestDetail {
  id        Int      @id @default(autoincrement())
  investId  String   @db.VarChar
  comment   String   @db.VarChar
  createdAt DateTime @default(now())
  changedAt DateTime @default(now())
  invest    Invest   @relation(fields: [investId], references: [id])
}

enum Category {
  EDU
  SHOPPING
  ETC
}
